<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: Promizen</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: Promizen</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>Promizen<span class="signature">(executor)</span><span class="type-signature"></span></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    
    <h4 class="name" id="Promizen"><span class="type-signature"></span>new Promizen<span class="signature">(executor)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Creates a new Promizen instance.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>executor</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last">A function that will be synchronously executed, passed with the methods <code>resolve</code> and <code>reject</code>.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="promizen.js.html">promizen.js</a>, <a href="promizen.js.html#line35">line 35</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        Throws a TypeError if the executor is not a function.
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">TypeError</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    







    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="catch"><span class="type-signature"></span>catch<span class="signature">(onRejected<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {<a href="Promizen.html">Promizen</a>}</span></h4>
    

    



<div class="description">
    Attaches the handler for the rejection of the promizen.

<p>Just alias <code>then(null, onRejected)</code></p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>onRejected</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">The handler to execute when the promizen is <a href="global.html#REJECTED"><code>REJECTED</code></a>.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="promizen.js.html">promizen.js</a>, <a href="promizen.js.html#line220">line 220</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A new promizen resolved with the return value of the handler or rejected with the error thrown from the handler.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Promizen.html">Promizen</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="reject"><span class="type-signature"></span>reject<span class="signature">(reason)</span><span class="type-signature"> &rarr; {void}</span></h4>
    

    



<div class="description">
    Rejects the promizen with the given reason.

<p>
 The rejection process is very simple, just set the promizen's state to <a href="global.html#REJECTED"><code>REJECTED</code></a> with the given reason.<br/>
 When resolve is invoked for the first time, the promizen's fate transitions from <a href="global.html#UNRESOLVED"><code>UNRESOLVED</code></a> to <a href="global.html#RESOLVED"><code>RESOLVED</code></a>,
 with any subsequent invocations proving ineffective.
</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>reason</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            

            

            <td class="description last">The reason for the rejection.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="promizen.js.html">promizen.js</a>, <a href="promizen.js.html#line118">line 118</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">void</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="resolve"><span class="type-signature"></span>resolve<span class="signature">(value)</span><span class="type-signature"> &rarr; {void}</span></h4>
    

    



<div class="description">
    Resolves the promizen with the given value.

<p>
 The resolution process:
 <ol style="list-style-type: none">
   <li>1. If the value is a thenable, the current promizen's state will match the value's state:
     <ol style="list-style-type: none">
       <li>1.1 If the value is a promizen, the current promizen's final state will be consistent with the value's final state.</li>
       <li>1.2. Otherwise, the current promizen will call the value's then method with a function termed onFulfilled which has a parameter "value",
         and a function termed onRejected with a parameter "reason". The value's then method may call back the onFulfilled or the onRejected function:
         <ol style="list-style-type: none">
           <li>1.2.1. The onFulfilled will recursively perform the resolution process with the value back passed by the then method.</li>
           <li>1.2.2. The OnRejected will reject the current promizen with the reason back passed by the then method.</li>
           <li>1.2.3. If the then method throws an error:
           <ol style="list-style-type: none">
             <li>1.2.3.1. If onFulfilled or onRejected has already been called, ignore the error.</li>
             <li>1.2.3.2. Otherwise, the current promizen will be <a href="global.html#REJECTED"><code>REJECTED</code></a> with the error.</li>
           </ol>
         </ol>
       <li>
     </ol>
   <li>
   <li>2. Otherwise, the current promizen will be <a href="global.html#FULFILLED"><code>FULFILLED</code></a> with the value.</li>
 </ol>
</p>
<p>
 When resolve is invoked for the first time, the promizen's fate transitions from <a href="global.html#UNRESOLVED"><code>UNRESOLVED</code></a> to <a href="global.html#RESOLVED"><code>RESOLVED</code></a>,
 with any subsequent invocations proving ineffective.<br/>
 Note that when the promizen's fate is <a href="global.html#RESOLVED"><code>RESOLVED</code></a>, its state may still be <a href="global.html#PENDING"><code>PENDING</code></a>,
 as the promizen will be settled asynchronously if the value is a thenable.
 See <a href="https://github.com/domenic/promises-unwrapping">Promises Unwrapping</a> for more information of States and Fates.
</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>value</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            

            

            <td class="description last">The value for the resolution.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="promizen.js.html">promizen.js</a>, <a href="promizen.js.html#line90">line 90</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">void</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="then"><span class="type-signature"></span>then<span class="signature">(onFulfilled<span class="signature-attributes">opt</span>, onRejected<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {<a href="Promizen.html">Promizen</a>}</span></h4>
    

    



<div class="description">
    Attaches handlers for the resolution and/or rejection of the promizen.

<p>
 The method receives two handlers: onFulfilled for the resolution and onRejected for the rejection.
 As agreed, the onFulfilled receives the resolved value of the current promizen as its argument,
 and the onRejected receives the rejected reason of the current promizen as its argument.
</p>

<p>
 It's interesting that the handlers won't be executed immediately even if the promizen is already settled,
 the handlers will be deferred to the micro-task queue:
 <ol style="list-style-type: none">
   <li>1. If the current promizen's state is <a href="global.html#FULFILLED"><code>FULFILLED</code></a>, the onFulfilled will be queued to the micro-task queue immediately.</li>
   <li>2. If the current promizen's state is <a href="global.html#REJECTED"><code>REJECTED</code></a>, the onRejected will be queued to the micro-task queue immediately.</li>
   <li>
     3. Otherwise, if the promizen is <a href="global.html#PENDING"><code>PENDING</code></a>, the onFulfilled and onRejected handlers will be stashed,
     and queued to the micro-task queue when the promizen is settled.
  </li>
 </ol>
 The queued onFulfilled or onRejected will be dequeued and executed, when the event-cycle reaches the micro-task queue,
 and the argument (value or reason of current promizen) passed to the handler is previous captured by closure.
</p>

<p>
 The then method immediately returns a new promizen, which is the key to promizen chaining.
 The new promizen will be resolved with the return value of the handlers or rejected with the error thrown from the handlers.
 The onFulfilled and onRejected handlers are optional. If they are not functions, they will be ignored, and the new Promizen
 will be resolved with the current promizen's value or rejected with the current promizen's reason.
</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>onFulfilled</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">The handler to execute when the promizen is <a href="global.html#FULFILLED"><code>FULFILLED</code></a>.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>onRejected</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">The handler to execute when the promizen is <a href="global.html#REJECTED"><code>REJECTED</code></a>.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="promizen.js.html">promizen.js</a>, <a href="promizen.js.html#line169">line 169</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A new promizen resolved with the return value of the handlers or rejected with the error thrown from the handlers.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Promizen.html">Promizen</a></span>


    </dd>
</dl>

    





        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Promizen.html">Promizen</a></li></ul><h3>Global</h3><ul><li><a href="global.html#FULFILLED">FULFILLED</a></li><li><a href="global.html#PENDING">PENDING</a></li><li><a href="global.html#REJECTED">REJECTED</a></li><li><a href="global.html#RESOLVED">RESOLVED</a></li><li><a href="global.html#UNRESOLVED">UNRESOLVED</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Sun Oct 27 2024 13:57:50 GMT+0800 (中国标准时间)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>